<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Boutique Buend√≠a</title>
<style>
:root {
  --bg: #ffffff;
  --text: #111;
  --muted: #777;
  --card-bg: #fff;
  --accent: #7c4dff;
  --shadow: 0 8px 20px rgba(0,0,0,0.08);
}
*{box-sizing:border-box;margin:0;padding:0;font-family:Inter,system-ui,sans-serif;}
body{background:var(--bg);color:var(--text);}
header{background:var(--card-bg);border-bottom:1px solid #ddd;position:sticky;top:0;z-index:20;}
.header-inner{display:flex;align-items:center;justify-content:space-between;padding:12px 20px;}
.logo{font-size:24px;font-weight:900;letter-spacing:1px;}
.header-actions{display:flex;align-items:center;gap:14px;}
.icon{cursor:pointer;font-size:20px;position:relative;}
.login-btn {background:none;border:none;font-size:16px;font-weight:600;color:var(--accent);cursor:pointer;padding:8px 12px;border-radius:6px;transition:opacity 0.2s;}
.login-btn:hover{opacity:0.8;}
main{max-width:1200px;margin:auto;padding:20px;}
.page-title{font-size:38px;margin:6px 0 14px;font-weight:800;}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:22px;}
.card{background:var(--card-bg);border-radius:10px;box-shadow:var(--shadow);overflow:hidden;display:flex;flex-direction:column;transition:transform .2s;cursor:pointer;}
.card:hover{transform:translateY(-4px);}
.card img{width:100%;height:auto;aspect-ratio:1/1;object-fit:contain;background:#f9f9f9;}
.card .meta{padding:14px;flex:1;display:flex;flex-direction:column;}
.card .title{font-size:14px;font-weight:600;margin-bottom:8px;}
.card .price{font-weight:800;font-size:16px;margin-bottom:12px;}
.card button{background:var(--accent);color:#fff;border:none;padding:10px;border-radius:8px;cursor:pointer;font-weight:600;}
.card button:hover{opacity:0.9;}
.cart-panel{position:fixed;top:0;right:-400px;width:340px;height:100%;background:var(--card-bg);
  box-shadow:-4px 0 20px rgba(0,0,0,0.2);transition:right .3s ease;display:flex;flex-direction:column;z-index:100;}
.cart-panel.open{right:0;}
.cart-header{padding:16px;font-size:20px;font-weight:700;border-bottom:1px solid #ccc;display:flex;justify-content:space-between;align-items:center;}
.cart-items{flex:1;overflow-y:auto;padding:14px;}
.cart-empty{text-align:center;color:var(--muted);font-size:15px;padding:50px 0;}
.cart-item{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;font-size:14px;}
.cart-item button{background:none;border:none;color:var(--accent);cursor:pointer;font-weight:700;}
.cart-footer{border-top:1px solid #ccc;padding:16px;transition:all .3s ease;}
.cart-total{font-weight:800;margin-bottom:10px;text-align:right;}
.payment-options{display:flex;flex-direction:column;gap:10px;margin-top:10px;}
.pay-btn{display:flex;align-items:center;justify-content:center;gap:8px;border:none;border-radius:8px;padding:10px 14px;font-weight:700;font-size:15px;cursor:pointer;}
.paypal{background:#ffc439;color:#111;}
.paypal img{height:18px;}
.cardpay{background:#0070ba;color:#fff;}
.cardpay img{height:20px;filter:invert(1);}
.toast{position:fixed;bottom:-80px;left:50%;transform:translateX(-50%);background:var(--accent);color:#fff;padding:14px 22px;border-radius:10px;opacity:0;transition:all .4s ease;z-index:200;font-weight:600;font-size:16px;box-shadow:0 6px 20px rgba(0,0,0,0.2);}
.toast.show{bottom:60px;opacity:1;transform:translateX(-50%) scale(1.05);}
@keyframes shake {
  0%,100% { transform: rotate(0deg); }
  20% { transform: rotate(-15deg); }
  40% { transform: rotate(15deg); }
  60% { transform: rotate(-10deg); }
  80% { transform: rotate(10deg); }
}
.shake { animation: shake 0.4s ease; }
#menuBtn { cursor:pointer;font-size:26px;z-index:30;position:relative; }
.menu-dropdown {position: fixed;top: 0; left: -270px;width: 250px; height: 100%;background: var(--card-bg);
  box-shadow: 2px 0 10px rgba(0,0,0,0.1);transition: left 0.3s ease;z-index: 25;padding: 60px 20px 20px;
  display: flex; flex-direction: column;}
.menu-dropdown.open { left: 0; }
.menu-item {padding: 14px 0;border-bottom: 2px solid #e1e1e1;cursor: pointer;font-size: 16px;color: var(--text);font-weight: 600;text-align:center;}
.menu-item:hover { color: var(--accent); }
.menu-overlay {position: fixed;top: 0;left: 0;width: 100%;height: 100%;background: rgba(0,0,0,0.2);z-index: 24;
  opacity: 0;visibility: hidden;transition: opacity 0.3s ease;}
.menu-overlay.show {opacity: 1;visibility: visible;}
.menu-close{position:absolute;top:12px;right:16px;font-size:22px;cursor:pointer;color:var(--text);}
.proximamente-box{
  text-align:center;
  background:var(--card-bg);
  padding:50px 20px;
  border-radius:12px;
  box-shadow:var(--shadow);
  max-width:400px;
  margin:80px auto;
}
.proximamente-box img{width:80px;margin-bottom:10px;opacity:0.7;}
.proximamente-box h2{font-size:22px;margin-bottom:8px;}
.proximamente-box p{color:var(--muted);}
.login-panel{position:fixed;top:0;left:-400px;width:340px;height:100%;background:var(--card-bg);box-shadow:4px 0 20px rgba(0,0,0,0.2);transition:left .3s ease;display:flex;flex-direction:column;z-index:100;}
.login-panel.open{left:0;}
.login-header{padding:16px;font-size:20px;font-weight:700;border-bottom:1px solid #ccc;display:flex;justify-content:space-between;align-items:center;}
.login-form{flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:12px;}
.login-input{width:100%;padding:12px;border:1px solid #ddd;border-radius:6px;font-size:14px;}
.login-btn-submit{background:var(--accent);color:#fff;border:none;padding:12px;border-radius:8px;cursor:pointer;font-weight:600;font-size:16px;}
.login-btn-submit:hover{opacity:0.9;}
.forgot-link{color:var(--accent);text-decoration:none;font-size:14px;text-align:center;display:block;margin-top:10px;cursor:pointer;}
.forgot-link:hover{opacity:0.8;}
.registro-link{color:var(--muted);text-align:center;font-size:14px;margin-top:10px;cursor:pointer;text-decoration:underline;}
.card .description{font-size:12px;color:var(--muted);margin-bottom:12px;}
</style>
</head>
<body>

<header>
  <div class="header-inner">
    <div id="menuBtn" title="Men√∫">‚ò∞</div>
    <button id="loginBtn" class="login-btn" title="Iniciar Sesi√≥n">Iniciar Sesi√≥n</button>
    <div class="logo">Boutique Buend√≠a</div>
    <div class="header-actions">
      <div id="cartBtn" class="icon" title="Carrito">
        <img src="https://cdn-icons-png.flaticon.com/512/833/833314.png" alt="Carrito" width="22">
      </div>
    </div>
  </div>
</header>

<!-- Men√∫ -->
<div class="menu-overlay" id="menuOverlay"></div>
<div class="menu-dropdown" id="menuDropdown">
  <span class="menu-close" id="menuClose">‚úï</span>
  <div class="menu-item" data-section="todos">Todos</div>
  <div class="menu-item" data-section="gorras">Gorras</div>
  <div class="menu-item" data-section="camisetas">Camisetas</div>
  <div class="menu-item" data-section="sudaderas">Sudaderas</div>
  <div class="menu-item" data-section="tenis">Tenis</div>
  <div class="menu-item" data-section="fragancias">Fragancias</div>
  <div class="menu-item" data-section="relojes">Relojes</div>
  <div class="menu-item" data-section="cintos">Cintos</div>
</div>

<!-- Panel de Login -->
<div class="login-panel" id="loginPanel">
  <div class="login-header">
    <span>Iniciar Sesi√≥n</span>
    <span id="closeLogin" style="cursor:pointer;">‚úï</span>
  </div>
  <form class="login-form" id="loginForm">
    <input type="text" id="username" class="login-input" placeholder="Usuario" required>
    <input type="password" id="password" class="login-input" placeholder="Contrase√±a" required>
    <button type="submit" class="login-btn-submit">Iniciar Sesi√≥n</button>
    <a href="#" id="forgotPassword" class="forgot-link" style="display:none;">Olvid√© mi contrase√±a</a>
    <div class="registro-link" id="registroLink">¬øNo tienes cuenta? Reg√≠strate</div>
  </form>
</div>

<main id="mainContent">
  <h1 class="page-title" id="pageTitle">Productos disponibles</h1>
  <section class="grid" id="productsGrid">
    <!-- Productos se cargan din√°micamente aqu√≠ -->
  </section>
</main>

<!-- Carrito -->
<div class="cart-panel" id="cartPanel">
  <div class="cart-header">
    <span>Carrito</span>
    <span id="closeCart" style="cursor:pointer;">‚úï</span>
  </div>
  <div class="cart-items" id="cartItems">
    <div class="cart-empty">Tu carrito est√° vac√≠o üõçÔ∏è</div>
  </div>
  <div class="cart-footer" id="cartFooter">
    <div class="cart-total" id="cartTotal">Total: $0</div>
    <div class="payment-options">
      <button class="pay-btn paypal" id="paypalBtn">
        <img src="https://www.paypalobjects.com/webstatic/mktg/Logo/pp-logo-100px.png" alt="PayPal">
        Pagar con PayPal
      </button>
      <button class="pay-btn cardpay" id="cardBtn">
        <img src="https://cdn-icons-png.flaticon.com/512/633/633611.png" alt="Tarjeta">
        Pagar con Tarjeta
      </button>
    </div>
  </div>
</div>

<div class="toast" id="toast">Producto agregado al carrito</div>

<script>
const cartBtn = document.getElementById('cartBtn');
const menuBtn = document.getElementById('menuBtn');
const menuDropdown = document.getElementById('menuDropdown');
const menuOverlay = document.getElementById('menuOverlay');
const menuClose = document.getElementById('menuClose');
const cartPanel = document.getElementById('cartPanel');
const closeCart = document.getElementById('closeCart');
const toast = document.getElementById('toast');
const cartItems = document.getElementById('cartItems');
const loginBtn = document.getElementById('loginBtn');
const loginPanel = document.getElementById('loginPanel');
const closeLogin = document.getElementById('closeLogin');
const loginForm = document.getElementById('loginForm');
const forgotPassword = document.getElementById('forgotPassword');
const registroLink = document.getElementById('registroLink');
const productsGrid = document.getElementById('productsGrid');
const pageTitle = document.getElementById('pageTitle');
let cart = JSON.parse(localStorage.getItem('cart')) || [];
let productos = [];
let currentSection = 'todos'; // Por defecto, todos

// Cargar y renderizar productos
function cargarProductos() {
  productos = JSON.parse(localStorage.getItem('productos')) || [];
  // Asignar IDs si no tienen
  productos.forEach((p, i) => {
    if (!p.id) p.id = i + 1;
  });
  localStorage.setItem('productos', JSON.stringify(productos));
  renderProductos(currentSection);
  renderCart(); // Cargar carrito al inicio
}

// Render productos filtrados por secci√≥n
function renderProductos(section) {
  currentSection = section;
  const grid = productsGrid;
  grid.innerHTML = '';
  let filteredProductos = productos;
  if (section !== 'todos') {
    filteredProductos = productos.filter(p => p.nombre.toLowerCase().includes(section.toLowerCase()));
  }
  if (filteredProductos.length === 0) {
    grid.innerHTML = '<div class="proximamente-box"><img src="https://cdn-icons-png.flaticon.com/512/814/814513.png"><h2>No hay productos</h2><p>Esta secci√≥n estar√° disponible muy pronto.</p></div>';
    pageTitle.textContent = `${section.charAt(0).toUpperCase() + section.slice(1)}`;
    return;
  }
  filteredProductos.forEach(p => {
    const card = document.createElement('div');
    card.className = 'card';
    card.onclick = () => window.location = `product.html?id=${p.id}`;
    card.innerHTML = `
      <img src="${p.imagen}" alt="${p.nombre}" onerror="this.src='https://via.placeholder.com/240?text=Imagen+No+Disponible'">
      <div class="meta">
        <div class="title">${p.nombre}</div>
        <div class="price">$${p.precio.toLocaleString('es-MX')}</div>
        <div class="description">${p.descripcion}</div>
        <button class="add-btn" onclick="event.stopPropagation(); agregarAlCarrito('${p.nombre}', ${p.precio})" style="margin-top:auto;">Agregar al carrito</button>
      </div>
    `;
    grid.appendChild(card);
  });
  pageTitle.textContent = section === 'todos' ? 'Productos disponibles' : `${section.charAt(0).toUpperCase() + section.slice(1)}`;
}

// Agregar al carrito
function agregarAlCarrito(name, price) {
  cart.push({name, price});
  localStorage.setItem('cart', JSON.stringify(cart));
  renderCart();
  animateCart();
  showToast("Producto agregado con √©xito üõí");
}

// Render carrito
function renderCart(){
  cartItems.innerHTML = "";
  if(cart.length === 0){
    cartItems.innerHTML = '<div class="cart-empty">Tu carrito est√° vac√≠o üõçÔ∏è</div>';
    document.getElementById('cartTotal').textContent = "Total: $0";
    return;
  }
  let total = 0;
  cart.forEach((p,i)=>{
    const item = document.createElement('div');
    item.className = 'cart-item';
    item.innerHTML = `<span>${p.name}</span>
                      <span>$${p.price.toLocaleString('es-MX')}</span>
                      <button onclick="removeItem(${i})">‚úï</button>`;
    cartItems.appendChild(item);
    total += p.price;
  });
  document.getElementById('cartTotal').textContent = "Total: $" + total.toLocaleString('es-MX');
}

function removeItem(i){ 
  cart.splice(i,1); 
  localStorage.setItem('cart', JSON.stringify(cart));
  renderCart(); 
}

function animateCart(){
  const img = cartBtn.querySelector('img');
  img.classList.add('shake');
  setTimeout(()=> img.classList.remove('shake'), 500);
}

function showToast(msg){
  toast.textContent = msg;
  toast.classList.add('show');
  setTimeout(()=> toast.classList.remove('show'), 2500);
}

// Men√∫
menuBtn.onclick = () => { menuDropdown.classList.add('open'); menuOverlay.classList.add('show'); };
menuOverlay.onclick = closeMenu;
menuClose.onclick = closeMenu;
function closeMenu(){ menuDropdown.classList.remove('open'); menuOverlay.classList.remove('show'); }

cartBtn.onclick = ()=> cartPanel.classList.add('open');
closeCart.onclick = ()=> cartPanel.classList.remove('open');

loginBtn.onclick = () => { loginPanel.classList.add('open'); };
closeLogin.onclick = () => { loginPanel.classList.remove('open'); forgotPassword.style.display = 'none'; };

document.querySelectorAll('.menu-item').forEach(item => {
  item.onclick = () => {
    const section = item.dataset.section;
    renderProductos(section);
    closeMenu();
  };
});

// Pagos - guardar compra
document.getElementById('paypalBtn').onclick = () => {
  if (cart.length === 0) {
    showToast('Carrito vac√≠o. Agrega productos primero.');
    return;
  }
  const total = cart.reduce((sum, item) => sum + item.price, 0);
  const compras = JSON.parse(localStorage.getItem('compras')) || [];
  compras.push({
    items: cart.map(item => ({nombre: item.name, precio: item.price})),
    total,
    fecha: new Date().toLocaleString('es-MX')
  });
  localStorage.setItem('compras', JSON.stringify(compras));
  localStorage.removeItem('cart');
  cart = [];
  renderCart();
  alert("¬°Pago exitoso con PayPal! Redirigiendo...");
  showToast('Compra realizada con √©xito. ¬°Gracias!');
};

document.getElementById('cardBtn').onclick = () => {
  if (cart.length === 0) {
    showToast('Carrito vac√≠o. Agrega productos primero.');
    return;
  }
  const total = cart.reduce((sum, item) => sum + item.price, 0);
  const compras = JSON.parse(localStorage.getItem('compras')) || [];
  compras.push({
    items: cart.map(item => ({nombre: item.name, precio: item.price})),
    total,
    fecha: new Date().toLocaleString('es-MX')
  });
  localStorage.setItem('compras', JSON.stringify(compras));
  localStorage.removeItem('cart');
  cart = [];
  renderCart();
  alert("¬°Pago exitoso con Tarjeta! Redirigiendo...");
  showToast('Compra realizada con √©xito. ¬°Gracias!');
};

// Login
loginForm.addEventListener('submit', (e) => {
  e.preventDefault();
  const username = document.getElementById('username').value.trim();
  const password = document.getElementById('password').value.trim();

  if (username === 'Buend√≠a' && password === 'shop') {
    window.location.href = 'admin.html';
  } else {
    forgotPassword.style.display = 'block';
    showToast('Credenciales incorrectas. Intenta de nuevo.');
  }
});

forgotPassword.onclick = () => {
  alert('Funcionalidad de recuperaci√≥n de contrase√±a pr√≥ximamente. Contacta a soporte.');
  forgotPassword.style.display = 'none';
};

registroLink.onclick = () => {
  alert('Registro pr√≥ximamente disponible. ¬°Mantente atento!');
};

// Inicializar
document.addEventListener('DOMContentLoaded', () => {
  cargarProductos();
});
</script>
</body>
</html>
