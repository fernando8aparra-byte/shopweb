<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Panel Admin - Boutique Buendía</title>

<style>
body{margin:0;font-family:Inter,system-ui,sans-serif;background:#fff;color:#111;}
main{max-width:650px;margin:40px auto;padding:20px;}
h1{font-size:24px;margin-bottom:18px;text-align:center;font-weight:800;}
input{width:100%;padding:10px;border:1px solid #ccc;border-radius:8px;margin-bottom:12px;font-size:15px;}
button{width:100%;padding:12px;background:#7c4dff;border:none;color:#fff;font-weight:700;border-radius:8px;cursor:pointer;margin-top:10px;}
button:hover{opacity:.9;}
.product-list{margin-top:35px;}
.product-item{padding:12px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center;}
.product-item span{font-weight:600;}
.product-item button{background:red;border:none;color:#fff;padding:6px 10px;border-radius:6px;cursor:pointer;font-size:13px;}
</style>
</head>

<body>

<header>
  <div style="padding:12px 20px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #ddd;">
    <div class="logo" style="font-weight:900;font-size:20px;">Panel Admin</div>
    <button onclick="cerrarSesion()" style="background:none;border:none;color:#7c4dff;font-weight:bold;cursor:pointer;">Cerrar sesión</button>
  </div>
</header>

<main>
  <h1>Agregar Producto</h1>

  <input type="text" placeholder="Nombre del producto" id="nombre">
  <input type="number" placeholder="Precio" id="precio">
  <input type="text" placeholder="URL de imagen" id="imagen">

  <button onclick="agregarProducto()">Guardar Producto</button>

  <div class="product-list" id="lista"></div>
</main>

<script>
// ================== VERIFICAR SESIÓN ADMIN ==================
const usuario = JSON.parse(localStorage.getItem("usuario"));
if(!usuario || usuario.tipo !== "admin"){
  alert("Acceso denegado ❌ Solo administradores");
  location.href = "index.html";
}

// ================== CARGAR PRODUCTOS ==================
let productos = JSON.parse(localStorage.getItem("productos")) || [];

function renderLista(){
  const lista = document.getElementById("lista");
  lista.innerHTML = "<h2>Productos agregados:</h2><br>";

  productos.forEach((p,i)=>{
    lista.innerHTML += `
      <div class="product-item">
        <span>${p.nombre} - $${p.precio}</span>
        <button onclick="eliminar(${i})">Eliminar</button>
      </div>
    `;
  });
}
renderLista();

// ================== AGREGAR PRODUCTO ==================
function agregarProducto(){
  let nombre = document.getElementById("nombre").value.trim();
  let precio = parseFloat(document.getElementById("precio").value);
  let imagen = document.getElementById("imagen").value.trim();

  if(!nombre || !precio || !imagen) return alert("Completa todos los campos");

  productos.push({
    id: Date.now(), // ID único del producto
    nombre,
    precio,
    imagen
  });

  localStorage.setItem("productos", JSON.stringify(productos));
  renderLista();
  document.getElementById("nombre").value="";
  document.getElementById("precio").value="";
  document.getElementById("imagen").value="";
  alert("Producto agregado ✅");
}

// ================== ELIMINAR PRODUCTO ==================
function eliminar(index){
  productos.splice(index,1);
  localStorage.setItem("productos",JSON.stringify(productos));
  renderLista();
}

// ================== CERRAR SESIÓN ==================
function cerrarSesion(){
  localStorage.removeItem("usuario");
  location.href="index.html";
}
</script>

</body>
</html>
